version: 2.0

jobs:
  test:
    docker:
      - image: jacopoventurin/mlcg_pytorch_geometric_cpu:v0.1
    steps:
      - checkout
      - run:
          name: "Install dependencies and repo"
          command: |
            pip --version
            pip install -r requirements.txt
            pip install .
      - run:
          name: "Run tests"
          command: "pytest ."

workflows:
  version: 2
  build_and_test:
    jobs:
      - test
